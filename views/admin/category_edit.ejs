<%- include("../layout/start") %>
<section class="row vw-100">
<%- include('../layout/adminNavbar') %>

<div class="container-fluid col-10  bg-light">
    <div class="row vh-100 d-flex justify-content-center align-items-center">
        <div class="category-edit">
        <form action="/admin/category-edit?id=<%=categoryData._id%>" id="form" method="post" enctype="multipart/form-data">
            <div class="d-flex justify-content-center">
                <h2 class="py-2">EDIT CATEGERY</h2>
            </div>
            <div>
                <label for="">EDIT CATEGERY NAME</label>
                <input  class="form-control" type="text" value="<%= categoryData.category %>" name="CatgeoryName" id="category" placeholder="Catgeory">
                    <small class="error ps-1 editerror text-danger"></small>

            </div>
            <div class= " d-flex flex-column align-items-center">
                <img style="height:250px; width: 250px; margin: 4px ;" src="catgoery/<%=categoryData.image%>" alt="">
                <label for="">EDIT IMAGE</label>
                <input id="file" class="form-control" type="file" name="image" id="file" >
                    <small  id="fileError" class=" ps-1 error text-danger"></small>

            </div>
            
            <div  class="d-flex justify-content-center">
            <button class="btn btn-primary my-3 " type="submit">SUBMIT</button>

            </div>
        </form>
    </div>
    </div>
</div>

<script>
    const form=document.getElementById('form')
    const category=document.getElementById('category')
    const file=document.getElementById('file')

    const seterror=(element,message)=>{
        const inputControll=element.parentElement;
        const errorDisplay=inputControll.querySelector('.error')
  
        errorDisplay.innerText=message
        inputControll.classList.add('error')
        inputControll.classList.remove('success')
      }
      const setSuccess=(element)=>{
        const inputControll=element.parentElement;
        const errorDisplay=inputControll.querySelector('.error')
  
        errorDisplay.innerText=''
        inputControll.classList.remove('success')
        inputControll.classList.add('error')
      }

      form.addEventListener('submit',e=>{

        const fileData=file.value.trim()
        const categoryData=category.value.trim()
///CATEGORY ////
        if(categoryData===''){
            seterror(category,'this field required')
            e.preventDefault()
        }else{
            setSuccess(category)
        }
/////FILE////
        if(fileData===''){
            seterror(file,'this field required')
            e.preventDefault()
        }else{
            setSuccess(file)
        }
      })
</script>
</section>
<%- include("../layout/end") %>